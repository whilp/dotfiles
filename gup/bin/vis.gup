#!/bin/sh

set -eux

v="e9f28e98dd09a444fe5ce8a149745e08f9d4228e"
f="${v}.tar.gz"
sum="f966ca9bfa6abec99ff717c8dd2cf1fc04624dfd5af21845d25605c5e829b155"
url="https://github.com/martanne/vis/archive/${f}"
tmp=$(mktemp -dp .)
(
    cd "$tmp"
    curl -sLo "$f" "$url"
    echo "$sum *$f" | sha256sum -c -
    tar xzf "$f" --strip-components=1
    ./configure
    make
    cp ./vis "$1"
    chmod a+x "$1"
)
rm -rf "$tmp"
