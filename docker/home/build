#!/bin/sh

set -ex

pkgs="\
	git \
	make \
	python3 \
	docker \
	curl \
	file \
	fish \
	tmux \
	go \
	bash \
	coreutils \
	"
docs=$(printf "%s-doc " $pkgs)
allpkgs="$pkgs \
	$docs \
	vis \
	go-tools \
	man \
	outils-signify \
	outils-doc \
	su-exec \
	git-perl \
	fish-tools \
	mdocml-apropos \
	ncurses \
	musl-dev \
	openjdk8 \
	"

apk --no-cache add --force-overwrite $allpkgs

#apk --no-cache add ca-certificates wget
#wget -q -O /etc/apk/keys/david@ostrovsky.org-5a0369d6.rsa.pub https://raw.githubusercontent.com/davido/bazel-alpine-package/master/david@ostrovsky.org-5a0369d6.rsa.pub
#wget https://github.com/davido/bazel-alpine-package/releases/download/0.10.0/bazel-0.10.0-r0.apk
#apk add bazel-0.10.0-r0.apk

ln -fs /usr/bin/vis /usr/bin/vis-editor

ln -fs /usr/bin/python3 /usr/bin/python
ln -fs /usr/bin/pydoc3 /usr/bin/pydoc

export GUP_XTRACE=1
export GUP_VERBOSE=1
make

