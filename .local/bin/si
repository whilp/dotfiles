#!/bin/bash

main() {
  need_shellinit || source $(get_bashrc)
  exec "$@"
}

need_shellinit() {
  env | grep -q 'SHELLINIT.*COMPLETE=1' 2>/dev/null
}

get_bashrc() {
  for name in $HOME/.*/shellinit/bashrc; do
    [ -r "$name" ] || continue
    echo "$name"
    break
  done
}

main "$@"
exit $?
