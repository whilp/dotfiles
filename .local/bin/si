#!/bin/bash

main() {
  need_shellinit || source $(get_shellinit)
  exec "$@"
}

need_shellinit() {
  env | grep -q 'SHELLINIT.*COMPLETE=1' 2>/dev/null
}

get_shellinit() {
  for name in $HOME/.*/shellinit/bashrc $HOME/.*/shellinit/profile $HOME/.*/shellinit/bash_profile; do
    [ -r "$name" ] || continue
    echo "$name"
    break
  done
}

main "$@"
exit $?
